define(["jquery","underscore"],function(t,e){function n(t){var e=document.location.host,n=document.location.protocol,r="//"+e,o=n+r;return t==o||t.slice(0,o.length+1)==o+"/"||t==r||t.slice(0,r.length+1)==r+"/"||!/^(\/\/|http:|https:).*/.test(t)}function r(t){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(t)}var o=function(t){var e=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),r=0;n.length>r;r++){var o=jQuery.trim(n[r]);if(o.substring(0,t.length+1)==t+"="){e=decodeURIComponent(o.substring(t.length+1));break}}return e},i=function(n){var r={},o=t(n).serializeArray();return e.each(o,function(t){"csrfmiddlewaretoken"!=t.value&&(r[t.name]=t.value)}),r},u=function(){function t(){var t=document.createElement("INPUT");return t.type="file","files"in t}function e(){var t=new XMLHttpRequest;return!!(t&&"upload"in t&&"onprogress"in t.upload)}function n(){return!!window.FormData}return t()&&e()&&n()},a=function(t,e,n){var r="",o=t.split("?"),i=o[0],u=o[1],a="";if(u){o=u.split("&");for(var s=0;o.length>s;s++)o[s].split("=")[0]!=e&&(r+=a+o[s],a="&")}var c=a+""+e+"="+n;return i+"?"+r+c};return{getCookie:o,form2object:i,updateURLParameter:a,safeMethod:r,sameOrigin:n,supportAjaxUploadWithProgress:u}});