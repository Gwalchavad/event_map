define("jade!views/../../templates/event",["jade"],function(jade){return function anonymous(locals,attrs,escape,rethrow,merge){attrs=attrs||jade.attrs,escape=escape||jade.escape,rethrow=rethrow||jade.rethrow,merge=merge||jade.merge;var buf=[];with(locals||{}){var interp;buf.push("<div><h1>");var __val__=title;buf.push(escape(null==__val__?"":__val__)),edit&&(buf.push("<a"),buf.push(attrs({href:"#/event/"+slug+"/edit","class":"btn btn-primary"},{href:!0})),buf.push(">EDIT</a>")),buf.push('<div class="row-fluid"><div class="span10"><h3>'),end_date&&buf.push("START: "+escape(null==(interp=start_date)?"":interp)+"<br/>END: "+escape(null==(interp=end_date)?"":interp)+'</h3></div></div><div class="row-fluid"><div class="span5"><h3>'),venue&&buf.push("VENUE:"+escape(null==(interp=venue)?"":interp)+"<br/>"),address&&buf.push("<span>ADDRESS: "+escape(null==(interp=address)?"":interp)+"</span>"),buf.push("<br/><a"),buf.push(attrs({href:"#/author/"+author},{href:!0})),buf.push(">BY:"+escape(null==(interp=author)?"":interp)+"</a></h3></div></div></h1><div>"+(null==(interp=content)?"":interp)+'</div><div class="options"><a'),buf.push(attrs({href:"/ical/event/"+slug+".ical",target:"_blank"},{href:!0,target:!0})),buf.push(">Export</a></div></div>")}return buf.join("")}}),define("views/event",["utils","backbone","jade!../../templates/event"],function(e,t,i){var s=t.View.extend({tagName:"div",className:"replace span7 overflow setheight",id:"event_view",height:0,initialize:function(){var e=this;app.session.on("change",function(){e.render()})},render:function(){this.model.get("location_point")&&app.map.add_marker(this.model.get("location_point").coordinates),this.edit=this.model.get("author")==app.session.get("username")?!0:!1,this.model.set("edit",this.edit,{silent:!0});var e=this.model.toJSON();return e.content=e.content.replace(/\n/g,"<br>"),e.start_date=this.model.get("start_datetime").format("dddd, MMMM Do YYYY, h:mm:ss a"),e.end_date=this.model.get("end_datetime").format("dddd, MMMM Do YYYY, h:mm:ss a"),this.$el.html(i(e)),this}});return{EventView:s}});