define(["backbone","jquery","hbs!../../templates/list_info","hbs!../../templates/profile","hbs!../../templates/edit_profile"],function(t,e,n,i,s){var o=t.View.extend({tagName:"div",className:"replace span3",id:"calender",events:{"mouseenter #ListOptionView":"onMouseenter","mouseleave #ListOptionView":"onMouseleave","click #editProfile":"editProfile"},childrenEL:"#listOptionPanels",initialize:function(t){this.constructor.__super__.initialize.apply(this,[t])},render:function(){function t(){var t,i=null;e.model?e.model.get("title")==app.session.get("username")?(t="MY EVENTS",i=!0):t=e.model.get("title"):(t="ALL EVENTS",i=!0),e.$el.append(n(e.model.toJSON()))}var e=this;if(this.model.id){var i=this.model.fetch();i.error(function(){throw"event not found"}),i.success(function(){t()})}else t();return this},onMouseenter:function(){e("#editProfile").show()},onMouseleave:function(){e("#editProfile").hide()},editProfile:function(){this.oldText=e("#description").text(),e("#ListOptionView").html(s({description:this.oldText})),e("#Cancel").one("click",this,this.closeEditor),e("#Save").one("click",this,this.saveProfile)},closeEditor:function(t){e("#ListOptionView").html(i(t.data.model.toJSON()))},saveProfile:function(t){var n=t.data;n.model.set("description",e("#description").val()),n.model.save(),n.closeEditor(t)}});return o});