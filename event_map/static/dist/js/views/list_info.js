define(["backbone","jquery","jade!../../templates/list_info","jade!../../templates/edit_profile"],function(e,t,i,s){var n=e.View.extend({tagName:"div",className:"replace span3",id:"calender",events:{"click #editProfile":"editProfile"},childrenEL:"#listOptionPanels",initialize:function(e){this.constructor.__super__.initialize.apply(this,[e])},render:function(){function e(){t.model&&t.model.get("title")==app.session.get("username")&&(t.model.set("title","MY EVENTS"),t.model.set("permissions",{group_admin:!0,add_event:!0})),t.$el.append(i(t.model.toJSON()))}var t=this;if(this.model.id){var s=this.model.fetch();s.error(function(){throw"event not found"}),s.success(function(){e()})}else e();return this},editProfile:function(){this.oldText=t("#description").text(),t("#ListOptionView").html(s({description:this.oldText})),t("#Cancel").one("click",this,this.closeEditor),t("#Save").one("click",this,this.saveProfile)},closeEditor:function(e){var t=e.data;t.$el.html(i(t.model.toJSON()))},saveProfile:function(e){var i=e.data;i.model.set("description",t("#description").val()),i.model.save(),i.closeEditor(e)}});return n});